/* ---------- Page ---------- */
.storage-page{
  width:100%;
  padding:16px 20px 24px;
  box-sizing:border-box;
  background:transparent;
}

/* ---------- Search ---------- */
.storage-search{
  width:min(520px,100%);
  height:36px;
  display:flex;
  align-items:center;
  gap:10px;
  background:#0B5ECF14;
  border-radius:999px;
  padding:0 12px 0 14px;
  margin-bottom:18px; /* จะถูกจัดให้อยู่แถวบนสุดของ header */
}
.storage-search img{ width:16px; height:16px; opacity:.8; }
.storage-search input{
  border:none; outline:none; background:transparent;
  width:100%; height:100%; font-size:14px; color:#0b0b0b;
}

/* --- Counter + refresh --- */
.file-count{ color:#374151; font-weight:600; }
.btn-refresh{
  appearance:none; border:0; cursor:pointer;
  width:32px; height:32px; border-radius:50%;
  display:inline-flex; align-items:center; justify-content:center;
  background:#e9f0fb; color:#1a73e8; font-size:16px; line-height:1;
  transition:transform .08s ease, background .12s ease;
}
.btn-refresh:hover{ background:#d8e6ff; }
.btn-refresh:active{ transform:scale(.96); }
.btn-refresh:disabled{ opacity:.5; cursor:not-allowed; }

/* ---------- Fixed sizes ---------- */
:root{
  --card-w:260px;
  --card-h:290px;   /* +20px เผื่อบรรทัด “by …” */
  --img-h:210px;
  --name-h:80px;    /* สูงขึ้นเพื่อชื่อ + ผู้อัปโหลด */
}

/* ---------- Grid ---------- */
.file-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,var(--card-w));
  gap:24px;
  justify-content:start;
  align-items:start;
}

/* ---------- Card ---------- */
.file-card{
  width:var(--card-w);
  height:var(--card-h);
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  background:#fff !important;
  border-radius:12px;
  box-shadow:0 2px 10px rgba(0,0,0,.08);
  border:1px solid transparent;
  overflow:hidden;
  cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
  text-align:left;
  margin:0;
}
.file-card:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 18px rgba(0,0,0,.12);
  border-color:#e7e7e7;
}
.file-card.is-selected{
  border-color:#0B5ECF;
  box-shadow:0 6px 18px rgba(11,94,207,.18);
}
/* reset UA styles ของปุ่ม */
button.file-card{
  appearance:none;
  -webkit-appearance:none;
  border:0;
  padding:0;
  background:#fff !important;
}

/* ---------- Image area ---------- */
.thumb-wrap{
  height:var(--img-h);
  width:100%;
  background:#0b1220 !important;   /* สีเดียวกับ preview */
  display:flex; align-items:center; justify-content:center;
  overflow:hidden;
  line-height:0;
}
.file-thumb{
  width:100%;
  height:100%;
  object-fit:contain;
  user-select:none;
  pointer-events:none;
  display:block;
  vertical-align:middle;
}

/* ---------- Name block ---------- */
.file-name{
  height:var(--name-h);
  padding:10px 14px 8px;
  background:#fff !important;
  color:#111;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:4px;
}
/* ชื่อไฟล์ (ตัดให้ไม่เกิน 2 บรรทัด) */
.file-title{
  font-weight:800;
  line-height:1.25;
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  text-overflow:ellipsis;
}
/* ผู้อัปโหลด */
.file-uploader{
  font-size:12px;
  color:#6b7280;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* ---------- Meta (ใต้ชื่อ) ---------- */
.file-meta{
  display:flex;
  gap:8px;
  padding:0 14px 12px;
  background:#fff !important;
}
.file-meta .meta{
  font-size:12px;
  color:#6b7280;
}

/* ---------- Responsive ---------- */
@media (max-width:680px){
  :root{
    --card-w:200px;
    --card-h:250px;
    --img-h:170px;
    --name-h:70px;
  }
  .file-grid{ gap:18px; }
}

/* ---------- Overlay controls (เฉพาะปุ่มลบ) ---------- */
.file-card-wrap{ position:relative; }
.file-delete{
  position:absolute; top:6px; right:6px;
  width:28px; height:28px;
  border:0; border-radius:50%;
  background:#00000080; color:#fff;
  display:inline-flex; align-items:center; justify-content:center;
  font-weight:900; line-height:1; cursor:pointer;
  transition:background .12s ease, transform .06s ease;
}
.file-delete:hover{ background:#000000aa; }
.file-delete:active{ transform:scale(.96); }
.file-delete:focus-visible{
  outline:none;
  box-shadow:0 0 0 3px #fff, 0 0 0 5px #0B5ECF;
}

/* ---------- Filter segmented control (SMALL) ---------- */
.storage-filters{
  display:inline-flex;           /* หดตามเนื้อหา */
  width:auto;
  max-width:max-content;
  gap:6px;                       /* ลดระยะ */
  background:#e9f0fb;
  padding:4px;                   /* เล็กลงจาก 6px */
  border-radius:999px;
  align-items:center;
  margin-bottom: 14px;
}
.segmented-btn{
  appearance:none;
  border:none;
  background:transparent;
  padding:6px 10px;              /* ปุ่มเล็กลง */
  border-radius:999px;
  font-weight:600;
  font-size:13px;                /* ตัวอักษรเล็กลง */
  color:#0c3d78;
  cursor:pointer;
  transition:transform .08s ease, background .15s ease;
  outline: none;
}
.segmented-btn:hover{ background:#d8e6ff; }
.segmented-btn:active{ transform:translateY(1px); }
.segmented-btn.active{
  background:#1a73e8;
  color:#fff;
  box-shadow:0 2px 8px rgba(26,115,232,.25);
}

/* ---------- Header layout: วาง Filters ใต้ Search ---------- */
.storage-header{
  display:grid;
  grid-template-columns: 1fr auto;            /* ซ้ายยืด = search, ขวา = counter */
  grid-template-areas:
    "search count"
    "filters filters";
  align-items:center;
  column-gap:14px;
  row-gap:10px;
}
.storage-search{ grid-area: search; }
.file-count{ grid-area: count; }
.storage-filters{ grid-area: filters; justify-self:start; } /* ชิดซ้ายและไม่ยืด */

/* ปรับความสูงช่องค้นหาให้พอดีกับปุ่มฟิลเตอร์ */
.storage-search input{ height:38px; }

/* จอแคบ: เรียงเป็นคอลัมน์ */
@media (max-width: 640px){
  .storage-header{
    grid-template-columns: 1fr;
    grid-template-areas:
      "search"
      "filters"
      "count";
  }
  .file-count{ justify-self:end; }
}
